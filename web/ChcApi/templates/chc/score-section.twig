{% extends 'layout.twig' %}

{% block content %}
    <h1>TEST</h1>
    <form action="" id="myForm">
        <select name="subject" id="subject_id" class="">
            <option value="">選擇科目</option>
            {% for v in subjectSelectArr %}
                <option value="{{ v }}"
                {% if v == select_subject %} selected {% endif %}
                >{{ v }}</option>
            {% endfor %}
        </select>
    </form>
    <table class="table table-striped table-hover">
        <tr>
            <th>座號</th>
            <th>姓名</th>
            <th>學號</th>
            <th>科目</th>
            <th>成績</th>
        </tr>
    {% for v in data[select_subject] %}
        <tr>
            <td>{{ v.number }}</td>
            <td>{{ v.student_name }}</td>
            <td>{{ v.stud_no }}</td>
            <td>{{ v.subject_name }}</td>
            <td>{{ v.score }}</td>
        </tr>
    {% endfor %}
    </table>
{% endblock %}

{% block inline %}
    <script>
        $(() => {
            $("#subject_id").change(() => {
                $("#myForm").submit();
            });
        });
    </script>
{% endblock inline %}